[workspace]
resolver = "2"
members = [
    "crates/tsuzulint_ast",
    "crates/tsuzulint_parser",
    "crates/tsuzulint_plugin",
    "crates/tsuzulint_cache",
    "crates/tsuzulint_core",
    "crates/tsuzulint_cli",
    "crates/tsuzulint_lsp",
    "crates/tsuzulint_registry",
    "crates/tsuzulint_manifest",
    "crates/tsuzulint_wasm",
    "crates/tsuzulint_text",
]

[workspace.package]
version = "0.1.0"
edition = "2024"
authors = ["Tomoya Hayakawa <simorgh3196@gmail.com>"]
license = "MIT"
homepage = "https://github.com/simorgh3196/tsuzulint"
repository = "https://github.com/simorgh3196/tsuzulint"
keywords = ["linter", "markdown", "lsp", "wasm"]
rust-version = "1.92"

[workspace.dependencies]
# Internal crates
tsuzulint_ast = { path = "crates/tsuzulint_ast" }
tsuzulint_parser = { path = "crates/tsuzulint_parser" }
tsuzulint_plugin = { path = "crates/tsuzulint_plugin", default-features = false }
tsuzulint_cache = { path = "crates/tsuzulint_cache" }
tsuzulint_core = { path = "crates/tsuzulint_core", default-features = false }
tsuzulint_manifest = { path = "crates/tsuzulint_manifest" }

# WASM Runtime - Extism uses wasmtime internally (native)
extism = "1.13.0"
extism-manifest = "1.13.0"

# WASM Runtime - Pure Rust interpreter (browser/wasm32 compatible)
wasmi = "1.0"

# Markdown Parser - mdast-compatible AST output
markdown = "1.0.0-alpha.21"

# Memory Allocation - Arena allocator for AST nodes (Oxc-like architecture)
bumpalo = "3.19"

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = { version = "1.0", features = ["raw_value"] }
jsonc-parser = "0.29.0"
rkyv = "0.8"                                               # Zero-copy deserialization for cache

# Async/Parallel
tokio = { version = "1.0", features = ["full"] }
rayon = "1.10"
tower-lsp = "0.20"

# Hashing for cache
blake3 = "1.5"

# CLI
clap = { version = "4.5", features = ["derive"] }

# Error handling
thiserror = "2.0"
miette = { version = "7.4", features = ["fancy"] }

# Logging
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }


# HTTP & Plugin Registry
reqwest = { version = "0.12", default-features = false, features = [
    "rustls-tls",
    "json",
    "stream",
] }
semver = "1.0"
jsonschema = "0.41"
sha2 = "0.10"
unicode-segmentation = "1.12.0"


# File system
walkdir = "2.5"
globset = "0.4"

# WASM browser bindings
wasm-bindgen = "0.2"
serde-wasm-bindgen = "0.6"
console_error_panic_hook = "0.1"
js-sys = "0.3"

# Testing
pretty_assertions = "1.4"
rstest = "0.26"
insta = { version = "1.46", features = ["json", "redactions"] }
tempfile = "3.25"
assert_fs = "1.1"
assert_cmd = "2.0"
predicates = "3.1"
wiremock = "0.6"
